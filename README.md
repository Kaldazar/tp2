# Техническое задание №2
**Работа с тестами и развертка CI-системы**

[![Java CI with Maven](https://github.com/Kaldazar/tp2/actions/workflows/maven.yml/badge.svg)](https://github.com/Kaldazar/tp2/actions/workflows/maven.yml)

## Работа на локальном устройстве

#### 1. Клонирование репозитория

```
git clone https://github.com/Kaldazar/tp2.git
```

#### 2. Запуск тестов вручную

Перейдите в папку репозитория `tp2/src/test/java`.

Там будет представлены реализации различных тестов, как проверяющих корректность работы, так и проверяющих скорость работы при увеличении количества данных (подробнее о разных тестах [здесь](#структура-проекта)). 

Запуск любого из файлов в папке произведет тестирование того или иного типа или функции.

## Работа с удаленным репозиторием

#### 1. Запуск тестирования вручную на GitHub

Перейдите на вкладку Actions репозитория и выберите в меню справа "Java CI with Maven".

Там в начале списка запусков рабочих процессов (`workflow runs`) с правой стороны нажмите на кнопку `Run workflow` и в открывшемся окне снова нажмите на `Run workflow`.

Таким образом, вы запустите тестирование, длящееся около 6 минут.

#### 2. Запуск тестирования при коммите

При каждом коммите тестирование будет начинаться автоматически.

#### 3. Текущий статус тестирования

Бэйдж с текущим статусом тестов находится под [первым заголовком](#техническое-задание-2).

#### 4. Результаты тестирования в Telegram

Для оповещения об успешности или неуспешности прохождения тестов используется Telegram-бот [ResultNotificationBot](https://t.me/testResNotify_bot) (@testResNotify_bot).

При успешном прохождении всех тестов бот послылает сообщение в чат:
**SUCCESS**: ALL TESTS PASSED

При провале тестирования отсылается:
**FAILURE**: TESTS FAILED

Пример работы бота:
![bot](https://github.com/Kaldazar/tp2/blob/master/bot_working.png?raw=true)

*Прим.*: Бот присылает сообщение в конкретный чат, поэтому сторонний пользователь, запустивший бота, ничего не будет получать.

## График для функции подсчета произведения

Был составлен график зависимости времени выполнения функции `_mult` от количества чисел во входных данных.
Использовались файлы с 10, 100, 1000, 10000, 100.000, 500.000 и 1.000.000 чисел, соответственно.

Сам график (ось X - кол-во чисел в файле, ось Y - время выполнения в наносекундах):
![chart](https://github.com/Kaldazar/tp2/blob/master/LoadTimeGraph.png?raw=true)

## Структура проекта
Проект состоит из нескольких наиболее важных папок и файлов:
* src - в данной папке находятся .java-файлы
    * main - папка для основной программы
        * java
            * Main.java - файл с реализациями методов поиска максимума, минимума и т.д.
    * test - папка для различных тестов (TestFunction.java - UNIT-тесты для проверки кореектности работы функций, файлы, содержащие "Load" в названии - нагрузочные тесты каждого метода)
        * java
            * TestFunction.java
            * TestMaxLoadFunction.java
            * TestMinLoadFunction.java
            * TestSumLoadFunction.java
            * TestLoadLoadFunction.java
* tests - папка с текстовыми файлами входных данных тестов
    * ...
* LoadTimeRes.xlsx - таблица Excel с приблизительным временем работы каждой из функций при увеличении входных данных и графиком одной из них (в наносекундах)

Остальные файлы и директории являются техническими и нужны только для корректной работы проекта.

## Автор

Гайфутдинов Данияр (НИУ ВШЭ, Бизнес-информатика, 1ый курс, ББИ232)
> Ссылка на Telegram: [@deathrattle94](https://t.me/deathrattle94)  
> Корпоративная почта: drgayfutdinov@edu.hse.ru